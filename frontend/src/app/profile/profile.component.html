<main *ngIf="loaded | async">
    <div class="profile">
        <div class="profile-l">
            <div class="profileImgDiv">
                <img src="{{ profile.image }}" class="profileimg">
            </div>
            <button *ngIf="!owner && profile.following === false"
                (click)="toggleFollow(profile.following)" class="button">Follow</button>
            <button *ngIf="!owner && profile.following === true"
                (click)="toggleFollow(profile.following)" class="button-active">Unfollow</button>
            <div class="profileUsername">
                <p class="username">{{ profile.username }}</p>
            </div>
            <div class="profileDescription">
                <p class="bio-title">Bio</p>
                <p class="bio">{{ profile.bio }}</p>
            </div>
        </div>
        <div class="profile-r">
            <div class="optionsOwner" *ngIf="owner">
                <button><span class="followers">3</span> Followers</button>
                <button><span class="followings">3</span> Followings</button>
                <button><span class="likes">3</span> Likes</button>
                <button><span class="comments">3</span> Comments</button>
                <button (click)="viewSettings()">Settings</button>
            </div>
            <div class="options" *ngIf="!owner">
                <button><span class="followers">3</span> Followers</button>
                <button><span class="followings">3</span> Followings</button>
                <button><span class="likes">3</span> Likes</button>
                <button><span class="comments">3</span> Comments</button>
            </div>
            <div class="settings" *ngIf="view=='settings'">
                <form [formGroup]="settingsForm" (ngSubmit)="submitForm()">

                    <h3>Settings</h3>
                    <label for="bio">Bio:</label>
                    <textarea class="bioInput" type="text" name="bio" formControlName="bio"></textarea>
                    <div class="text-danger" *ngIf="settingsForm.get('bio')?.hasError('required') &&
                                        settingsForm.get('bio')?.touched">
                        <span>Bio <strong>required</strong></span>
                    </div>

                    <label for="password">Password:</label>
                    <input type="password" name="password" formControlName="password">
                    <div class="text-danger" *ngIf="settingsForm.get('password') && settingsForm.get('password')?.hasError('minlength') &&
                        settingsForm.get('password')?.touched">
                        <span>Password <strong>required</strong>, 5 characters min</span>
                    </div>

                    <label for="repeatPassword">Repeat password:</label>
                    <input type="password" name="repeatPassword" formControlName="repeatPassword">
                    <div class="text-danger" *ngIf="settingsForm.get('repeatPassword')?.hasError('required') && settingsForm.get('repeatPassword')?.touched
                        || settingsForm.get('repeatPassword')?.hasError('minlength') && settingsForm.get('repeatPassword')?.touched
                        || confirmPassword_invalid && settingsForm.get('repeatPassword')?.touched">
                        <span>Passwords <strong>must</strong> be equal.</span>
                    </div>
                    <button class="btn btn-lg btn-block btn-primary mb-2" type="submit"
                        [disabled]="!settingsForm.valid">Change values</button>
                </form>
            </div>
        </div>
    </div>
</main>